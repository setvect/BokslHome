#!/bin/bash

##############################################################################
# 데이터 디렉토리 권한 수정 스크립트
# Docker 컨테이너 사용자(UID 1001)가 접근할 수 있도록 권한 설정
##############################################################################

echo "=========================================="
echo "데이터 디렉토리 권한 설정"
echo "=========================================="
echo ""
echo "Docker 컨테이너가 데이터를 읽고 쓸 수 있도록 권한을 설정합니다."
echo "sudo 비밀번호를 입력해주세요:"
echo ""

cd "$(dirname "$0")/.."
sudo chown -R 1001:1001 ./data/

if [ $? -eq 0 ]; then
    echo ""
    echo "✅ 권한 설정 완료!"
    echo ""
    echo "이제 다음 명령으로 컨테이너를 실행하세요:"
    echo "  ./scripts/docker-run.sh"
    echo ""
else
    echo ""
    echo "❌ 권한 설정 실패"
    echo ""
    echo "대안: 컨테이너를 root 사용자로 실행하거나"
    echo "데이터 디렉토리를 다른 위치에 생성하세요."
    echo ""
fi

