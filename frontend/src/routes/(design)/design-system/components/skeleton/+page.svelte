<script lang="ts">
  import { Skeleton } from '$lib/components/ui/skeleton/index.js';
  import { Button } from '$lib/components/ui/button/index.js';
  import * as Card from '$lib/components/ui/card/index.js';
  import { RefreshCw } from '@lucide/svelte';

  let isLoading = $state(false);
  let showPostsLoading = $state(false);
  let showTableLoading = $state(false);
  let showProfileLoading = $state(false);

  function simulateLoading(callback: (value: boolean) => void) {
    callback(true);
    setTimeout(() => {
      callback(false);
    }, 3000);
  }

  // ì‹¤ì œ ë°ì´í„° (ë¡œë”© ì™„ë£Œ í›„ í‘œì‹œ)
  const posts = [
    {
      id: 1,
      title: 'SvelteKit 5 Runes ì™„ì „ ê°€ì´ë“œ',
      excerpt: 'Svelte 5ì˜ ìƒˆë¡œìš´ ë°˜ì‘ì„± ì‹œìŠ¤í…œì¸ Runesë¥¼ í™œìš©í•œ í˜„ëŒ€ì ì¸ ì›¹ ê°œë°œ ë°©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.',
      author: 'ê¹€ê°œë°œ',
      date: '2024-01-15',
      image: true
    },
    {
      id: 2,
      title: 'TypeScript ê³ ê¸‰ íƒ€ì… íŒ¨í„´',
      excerpt: 'ì œë„¤ë¦­, ìœ ë‹ˆì˜¨ íƒ€ì…, ì¡°ê±´ë¶€ íƒ€ì… ë“± TypeScriptì˜ ê³ ê¸‰ ê¸°ëŠ¥ë“¤ì„ ë§ˆìŠ¤í„°í•´ë³´ì„¸ìš”.',
      author: 'ë°•íƒ€ì…',
      date: '2024-01-14',
      image: false
    },
    {
      id: 3,
      title: 'ëª¨ë˜ CSS ë ˆì´ì•„ì›ƒ ê¸°ë²•',
      excerpt: 'Grid, Flexbox, Container Queriesë¥¼ í™œìš©í•œ ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ êµ¬ì„± ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.',
      author: 'ì´ìŠ¤íƒ€ì¼',
      date: '2024-01-13',
      image: true
    }
  ];

  const users = [
    { id: 1, name: 'ë³µìŠ¬ì´', email: 'boksl@example.com', role: 'Admin', status: 'Active' },
    { id: 2, name: 'ì´ê°œë°œ', email: 'dev@example.com', role: 'Developer', status: 'Active' },
    { id: 3, name: 'ë°•ë””ìì¸', email: 'design@example.com', role: 'Designer', status: 'Inactive' }
  ];
</script>

<section class="space-y-8">
  <div>
    <h1 class="text-2xl font-bold">Skeleton</h1>
    <p class="text-muted-foreground">ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© ì»´í¬ë„ŒíŠ¸ - ì½˜í…ì¸ ê°€ ë¡œë”©ë˜ëŠ” ë™ì•ˆ ì‚¬ìš©ìì—ê²Œ êµ¬ì¡°ì ì¸ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
  </div>

  <div class="space-y-6">
    <div class="space-y-4">
      <h2 class="text-xl font-semibold">ê¸°ë³¸ ìŠ¤ì¼ˆë ˆí†¤</h2>
      <div class="space-y-4">
        <div class="space-y-2">
          <h3 class="text-lg font-medium">ë‹¤ì–‘í•œ í¬ê¸°</h3>
          <div class="space-y-2">
            <Skeleton class="h-4 w-[250px]" />
            <Skeleton class="h-4 w-[200px]" />
            <Skeleton class="h-4 w-[150px]" />
          </div>
        </div>

        <div class="space-y-2">
          <h3 class="text-lg font-medium">ì›í˜• ë° ì‚¬ê°í˜•</h3>
          <div class="flex items-center space-x-4">
            <Skeleton class="h-12 w-12 rounded-full" />
            <div class="space-y-2">
              <Skeleton class="h-4 w-[250px]" />
              <Skeleton class="h-4 w-[200px]" />
            </div>
          </div>
        </div>

        <div class="space-y-2">
          <h3 class="text-lg font-medium">í° ì½˜í…ì¸  ë¸”ë¡</h3>
          <Skeleton class="h-32 w-full" />
        </div>
      </div>
    </div>

    <div class="space-y-4">
      <h2 class="text-xl font-semibold">ì¹´ë“œ ìŠ¤ì¼ˆë ˆí†¤</h2>
      <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
        <!-- ìŠ¤ì¼ˆë ˆí†¤ ì¹´ë“œ 1 -->
        <Card.Root>
          <Card.Content class="p-6 space-y-4">
            <Skeleton class="h-4 w-2/3" />
            <div class="space-y-2">
              <Skeleton class="h-4 w-full" />
              <Skeleton class="h-4 w-full" />
              <Skeleton class="h-4 w-3/4" />
            </div>
            <div class="flex items-center space-x-2">
              <Skeleton class="h-6 w-6 rounded-full" />
              <Skeleton class="h-4 w-20" />
            </div>
          </Card.Content>
        </Card.Root>

        <!-- ìŠ¤ì¼ˆë ˆí†¤ ì¹´ë“œ 2 -->
        <Card.Root>
          <Card.Content class="p-6 space-y-4">
            <Skeleton class="h-40 w-full rounded-md" />
            <div class="space-y-2">
              <Skeleton class="h-5 w-3/4" />
              <Skeleton class="h-4 w-full" />
              <Skeleton class="h-4 w-2/3" />
            </div>
          </Card.Content>
        </Card.Root>

        <!-- ìŠ¤ì¼ˆë ˆí†¤ ì¹´ë“œ 3 -->
        <Card.Root>
          <Card.Content class="p-6 space-y-4">
            <div class="flex items-center space-x-2">
              <Skeleton class="h-8 w-8 rounded-full" />
              <div class="space-y-1">
                <Skeleton class="h-4 w-24" />
                <Skeleton class="h-3 w-16" />
              </div>
            </div>
            <div class="space-y-2">
              <Skeleton class="h-4 w-full" />
              <Skeleton class="h-4 w-5/6" />
            </div>
          </Card.Content>
        </Card.Root>
      </div>
    </div>

    <div class="space-y-4">
      <h2 class="text-xl font-semibold">ì‹¤ì œ ì‚¬ìš© ì˜ˆì œ - ê²Œì‹œê¸€ ëª©ë¡</h2>
      <div class="flex gap-2 mb-4">
        <Button
          onclick={() => simulateLoading((val) => (showPostsLoading = val))}
          disabled={showPostsLoading}
          class="flex items-center gap-2"
        >
          {#if showPostsLoading}
            <RefreshCw class="h-4 w-4 animate-spin" />
            ë¡œë”© ì¤‘...
          {:else}
            ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
          {/if}
        </Button>
      </div>

      <div class="space-y-4">
        {#if showPostsLoading}
          <!-- ë¡œë”© ì¤‘ì¼ ë•Œ ìŠ¤ì¼ˆë ˆí†¤ í‘œì‹œ -->
          {#each Array(3) as _, index}
            <Card.Root>
              <Card.Content class="p-6">
                <div class="flex gap-4">
                  <Skeleton class="h-24 w-24 rounded-md flex-shrink-0" />
                  <div class="flex-1 space-y-3">
                    <div class="space-y-2">
                      <Skeleton class="h-5 w-3/4" />
                      <Skeleton class="h-4 w-full" />
                      <Skeleton class="h-4 w-2/3" />
                    </div>
                    <div class="flex items-center gap-4">
                      <div class="flex items-center gap-2">
                        <Skeleton class="h-5 w-5 rounded-full" />
                        <Skeleton class="h-4 w-16" />
                      </div>
                      <Skeleton class="h-4 w-20" />
                    </div>
                  </div>
                </div>
              </Card.Content>
            </Card.Root>
          {/each}
        {:else}
          <!-- ë¡œë”© ì™„ë£Œ í›„ ì‹¤ì œ ë°ì´í„° í‘œì‹œ -->
          {#each posts as post}
            <Card.Root>
              <Card.Content class="p-6">
                <div class="flex gap-4">
                  {#if post.image}
                    <div class="h-24 w-24 bg-muted rounded-md flex-shrink-0 flex items-center justify-center">
                      <span class="text-muted-foreground text-xs">Image</span>
                    </div>
                  {:else}
                    <div class="h-24 w-24 bg-gray-100 rounded-md flex-shrink-0"></div>
                  {/if}
                  <div class="flex-1 space-y-3">
                    <div class="space-y-2">
                      <h3 class="text-lg font-semibold">{post.title}</h3>
                      <p class="text-muted-foreground text-sm">{post.excerpt}</p>
                    </div>
                    <div class="flex items-center gap-4 text-sm text-muted-foreground">
                      <span>ì‘ì„±ì: {post.author}</span>
                      <span>{post.date}</span>
                    </div>
                  </div>
                </div>
              </Card.Content>
            </Card.Root>
          {/each}
        {/if}
      </div>
    </div>

    <div class="space-y-4">
      <h2 class="text-xl font-semibold">í…Œì´ë¸” ìŠ¤ì¼ˆë ˆí†¤</h2>
      <div class="flex gap-2 mb-4">
        <Button
          onclick={() => simulateLoading((val) => (showTableLoading = val))}
          disabled={showTableLoading}
          class="flex items-center gap-2"
        >
          {#if showTableLoading}
            <RefreshCw class="h-4 w-4 animate-spin" />
            ë¡œë”© ì¤‘...
          {:else}
            í…Œì´ë¸” ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
          {/if}
        </Button>
      </div>

      <Card.Root>
        <Card.Content class="p-0">
          <div class="overflow-hidden">
            <!-- í…Œì´ë¸” í—¤ë”ëŠ” í•­ìƒ í‘œì‹œ -->
            <div class="grid grid-cols-4 gap-4 p-4 border-b bg-muted/50">
              <div class="font-medium">ì´ë¦„</div>
              <div class="font-medium">ì´ë©”ì¼</div>
              <div class="font-medium">ì—­í• </div>
              <div class="font-medium">ìƒíƒœ</div>
            </div>

            {#if showTableLoading}
              <!-- ìŠ¤ì¼ˆë ˆí†¤ í–‰ë“¤ -->
              {#each Array(5) as _, index}
                <div class="grid grid-cols-4 gap-4 p-4 border-b">
                  <Skeleton class="h-4 w-24" />
                  <Skeleton class="h-4 w-32" />
                  <Skeleton class="h-6 w-16 rounded-full" />
                  <Skeleton class="h-6 w-20 rounded-full" />
                </div>
              {/each}
            {:else}
              <!-- ì‹¤ì œ ë°ì´í„° í–‰ë“¤ -->
              {#each users as user}
                <div class="grid grid-cols-4 gap-4 p-4 border-b">
                  <div class="font-medium">{user.name}</div>
                  <div class="text-muted-foreground">{user.email}</div>
                  <div class="font-medium">{user.role}</div>
                  <div class="font-medium text-green-600">{user.status}</div>
                </div>
              {/each}
            {/if}
          </div>
        </Card.Content>
      </Card.Root>
    </div>

    <div class="space-y-4">
      <h2 class="text-xl font-semibold">í”„ë¡œí•„ ìŠ¤ì¼ˆë ˆí†¤</h2>
      <div class="flex gap-2 mb-4">
        <Button
          onclick={() => simulateLoading((val) => (showProfileLoading = val))}
          disabled={showProfileLoading}
          class="flex items-center gap-2"
        >
          {#if showProfileLoading}
            <RefreshCw class="h-4 w-4 animate-spin" />
            ë¡œë”© ì¤‘...
          {:else}
            í”„ë¡œí•„ ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
          {/if}
        </Button>
      </div>

      <Card.Root>
        <Card.Content class="p-6">
          {#if showProfileLoading}
            <!-- í”„ë¡œí•„ ìŠ¤ì¼ˆë ˆí†¤ -->
            <div class="space-y-6">
              <div class="flex items-center gap-4">
                <Skeleton class="h-20 w-20 rounded-full" />
                <div class="space-y-2">
                  <Skeleton class="h-6 w-32" />
                  <Skeleton class="h-4 w-48" />
                  <Skeleton class="h-5 w-20 rounded-full" />
                </div>
              </div>

              <div class="space-y-4">
                <Skeleton class="h-5 w-24" />
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  {#each Array(4) as _, index}
                    <div class="text-center p-4 border rounded-lg space-y-2">
                      <Skeleton class="h-8 w-12 mx-auto" />
                      <Skeleton class="h-4 w-16 mx-auto" />
                    </div>
                  {/each}
                </div>
              </div>

              <div class="space-y-3">
                <Skeleton class="h-5 w-20" />
                <div class="space-y-2">
                  <Skeleton class="h-4 w-full" />
                  <Skeleton class="h-4 w-3/4" />
                  <Skeleton class="h-4 w-2/3" />
                </div>
              </div>
            </div>
          {:else}
            <!-- ì‹¤ì œ í”„ë¡œí•„ ë°ì´í„° -->
            <div class="space-y-6">
              <div class="flex items-center gap-4">
                <div class="h-20 w-20 rounded-full bg-primary/10 flex items-center justify-center">
                  <span class="text-2xl">ğŸ‘¤</span>
                </div>
                <div class="space-y-2">
                  <h2 class="text-2xl font-bold">ë³µìŠ¬ì´</h2>
                  <p class="text-muted-foreground">boksl@example.com</p>
                  <span class="inline-block px-3 py-1 text-xs bg-green-100 text-green-800 rounded-full">ê´€ë¦¬ì</span>
                </div>
              </div>

              <div class="space-y-4">
                <h3 class="text-lg font-semibold">í™œë™ í†µê³„</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  <div class="text-center p-4 border rounded-lg">
                    <div class="text-2xl font-bold">23</div>
                    <div class="text-sm text-muted-foreground">ê²Œì‹œê¸€</div>
                  </div>
                  <div class="text-center p-4 border rounded-lg">
                    <div class="text-2xl font-bold">45</div>
                    <div class="text-sm text-muted-foreground">ì§€ì‹</div>
                  </div>
                  <div class="text-center p-4 border rounded-lg">
                    <div class="text-2xl font-bold">12</div>
                    <div class="text-sm text-muted-foreground">ë…¸íŠ¸</div>
                  </div>
                  <div class="text-center p-4 border rounded-lg">
                    <div class="text-2xl font-bold">89</div>
                    <div class="text-sm text-muted-foreground">ëŒ“ê¸€</div>
                  </div>
                </div>
              </div>

              <div class="space-y-3">
                <h3 class="text-lg font-semibold">ì†Œê°œ</h3>
                <p class="text-muted-foreground">
                  ë³µìŠ¬í™ˆ í”„ë¡œì íŠ¸ë¥¼ ê°œë°œí•˜ê³  ìˆëŠ” í’€ìŠ¤íƒ ê°œë°œìì…ë‹ˆë‹¤. Spring Bootì™€ SvelteKitì„ ì£¼ë¡œ ì‚¬ìš©í•˜ë©°, ê¹”ë”í•˜ê³  íš¨ìœ¨ì ì¸ ì½”ë“œë¥¼
                  ì‘ì„±í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.
                </p>
              </div>
            </div>
          {/if}
        </Card.Content>
      </Card.Root>
    </div>

    <div class="space-y-4">
      <h2 class="text-xl font-semibold">ìŠ¤ì¼ˆë ˆí†¤ íŒ¨í„´ë“¤</h2>
      <div class="grid gap-6 md:grid-cols-2">
        <!-- ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ íŒ¨í„´ -->
        <Card.Root>
          <Card.Header>
            <Card.Title>ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ íŒ¨í„´</Card.Title>
          </Card.Header>
          <Card.Content class="space-y-4">
            {#each Array(3) as _, index}
              <div class="flex items-center space-x-4">
                <Skeleton class="h-10 w-10 rounded-full" />
                <div class="space-y-2 flex-1">
                  <Skeleton class="h-4 w-full" />
                  <Skeleton class="h-3 w-3/4" />
                </div>
              </div>
            {/each}
          </Card.Content>
        </Card.Root>

        <!-- ë¯¸ë””ì–´ ì¹´ë“œ íŒ¨í„´ -->
        <Card.Root>
          <Card.Header>
            <Card.Title>ë¯¸ë””ì–´ ì¹´ë“œ íŒ¨í„´</Card.Title>
          </Card.Header>
          <Card.Content class="space-y-4">
            <Skeleton class="h-32 w-full rounded-md" />
            <div class="space-y-2">
              <Skeleton class="h-5 w-3/4" />
              <Skeleton class="h-4 w-full" />
              <Skeleton class="h-4 w-2/3" />
            </div>
            <div class="flex items-center justify-between">
              <Skeleton class="h-4 w-20" />
              <Skeleton class="h-8 w-16 rounded-md" />
            </div>
          </Card.Content>
        </Card.Root>
      </div>
    </div>

    <div class="space-y-4">
      <h2 class="text-xl font-semibold">ì½”ë“œ ì˜ˆì œ</h2>
      <pre class="text-sm bg-muted p-4 rounded-md overflow-x-auto"><code
          >{`<script lang="ts">
  import { Skeleton } from '$lib/components/ui/skeleton/index.js';

  let isLoading = $state(true);

  // ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
  function simulateLoading() {
    isLoading = true;
    setTimeout(() => {
      isLoading = false;
    }, 2000);
  }
</script>

<!-- ê¸°ë³¸ ìŠ¤ì¼ˆë ˆí†¤ -->
<Skeleton class="h-4 w-[250px]" />
<Skeleton class="h-4 w-[200px]" />
<Skeleton class="h-4 w-[150px]" />

<!-- ì›í˜• ìŠ¤ì¼ˆë ˆí†¤ -->
<div class="flex items-center space-x-4">
  <Skeleton class="h-12 w-12 rounded-full" />
  <div class="space-y-2">
    <Skeleton class="h-4 w-[250px]" />
    <Skeleton class="h-4 w-[200px]" />
  </div>
</div>

<!-- ì¡°ê±´ë¶€ ë¡œë”© -->
{#if isLoading}
  <!-- ìŠ¤ì¼ˆë ˆí†¤ í‘œì‹œ -->
  <div class="space-y-4">
    {#each Array(3) as _}
      <div class="flex items-center space-x-4">
        <Skeleton class="h-10 w-10 rounded-full" />
        <div class="space-y-2 flex-1">
          <Skeleton class="h-4 w-full" />
          <Skeleton class="h-3 w-3/4" />
        </div>
      </div>
    {/each}
  </div>
{:else}
  <!-- ì‹¤ì œ ë°ì´í„° í‘œì‹œ -->
  {#each items as item}
    <div class="flex items-center space-x-4">
      <img src={item.avatar} alt={item.name} class="h-10 w-10 rounded-full" />
      <div>
        <p class="font-medium">{item.name}</p>
        <p class="text-sm text-muted-foreground">{item.description}</p>
      </div>
    </div>
  {/each}
{/if}

<!-- ì¹´ë“œ ìŠ¤ì¼ˆë ˆí†¤ -->
<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
  {#if isLoading}
    {#each Array(6) as _}
      <Card.Root>
        <Card.Content class="p-6 space-y-4">
          <Skeleton class="h-40 w-full rounded-md" />
          <div class="space-y-2">
            <Skeleton class="h-5 w-3/4" />
            <Skeleton class="h-4 w-full" />
            <Skeleton class="h-4 w-2/3" />
          </div>
        </Card.Content>
      </Card.Root>
    {/each}
  {:else}
    {#each posts as post}
      <Card.Root>
        <Card.Content class="p-6">
          <img src={post.image} alt={post.title} class="h-40 w-full object-cover rounded-md" />
          <h3 class="text-lg font-semibold mt-4">{post.title}</h3>
          <p class="text-muted-foreground">{post.excerpt}</p>
        </Card.Content>
      </Card.Root>
    {/each}
  {/if}
</div>

<!-- í…Œì´ë¸” ìŠ¤ì¼ˆë ˆí†¤ -->
<Table.Root>
  <Table.Header>
    <Table.Row>
      <Table.Head>ì´ë¦„</Table.Head>
      <Table.Head>ì´ë©”ì¼</Table.Head>
      <Table.Head>ìƒíƒœ</Table.Head>
    </Table.Row>
  </Table.Header>
  <Table.Body>
    {#if isLoading}
      {#each Array(5) as _}
        <Table.Row>
          <Table.Cell><Skeleton class="h-4 w-24" /></Table.Cell>
          <Table.Cell><Skeleton class="h-4 w-32" /></Table.Cell>
          <Table.Cell><Skeleton class="h-6 w-16 rounded-full" /></Table.Cell>
        </Table.Row>
      {/each}
    {:else}
      {#each users as user}
        <Table.Row>
          <Table.Cell>{user.name}</Table.Cell>
          <Table.Cell>{user.email}</Table.Cell>
          <Table.Cell>{user.status}</Table.Cell>
        </Table.Row>
      {/each}
    {/if}
  </Table.Body>
</Table.Root>`}</code
        ></pre>
    </div>
  </div>
</section>
